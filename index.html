<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">

    <title>Estoque de Diesel</title>
</head>

<body>
    <main class="container">
        <img class="logo" src="/assets/logo-completa-rodojunior.svg" alt="Rodojunior Logo">
        <div class="box">
            <h1>Estoque Atual de Diesel</h1>

            <div class="valor" style="display: flex; align-items: center;">
                <img height="" width="20" src="/assets/icone-diesel-amarelo.png" alt="icone diesel" class="icone-diesel">
                <h2 id="resultado"></h2>
            </div>

            <button class="button-att" type="button" onclick="carregar()" id="botao">
                Atualizar
            </button>
        </div>


    </main>

    <script>
        async function carregar() {
            try {
                document.getElementById("resultado").textContent = '------';
                document.getElementById("botao").textContent = 'Carregando...';

                const response = await fetch("http://10.1.1.219:5000/api/estoquediesel");
                const texto = await response.text();

                const match = texto.match(/(\d+(?:[.,]\d+)?)/);

                let numero = match ? match[1].replace(",", ".") + " L" : "NÃ£o encontrado";

                document.getElementById("resultado").textContent = numero;
                document.getElementById("botao").textContent = 'Atualizar';

            } catch (error) {
                document.getElementById("resultado").textContent = "Erro ao carregar dados";
                console.error("Erro:", error);
            }
        }

        carregar();
    </script>



</body>

</html>